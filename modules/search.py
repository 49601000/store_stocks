"""
app.py  â€• ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ
ã‚¿ãƒ–ã®è¿½åŠ ã¯ tabs ãƒªã‚¹ãƒˆã¨ render() å‘¼ã³å‡ºã—ã‚’1è¡Œè¿½åŠ ã™ã‚‹ã ã‘ã€‚
"""

import streamlit as st
from modules import data, search, transfer, dashboard, settings

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
#  ãƒšãƒ¼ã‚¸è¨­å®š
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
st.set_page_config(
    page_title="ãƒãƒˆã‚¤ãƒ»ãƒ‹ã‚³ãƒ¡ åœ¨åº«ç®¡ç†",
    page_icon="ğŸ‘“",
    layout="wide",
)

st.title("ğŸ‘“ ãƒãƒˆã‚¤ãƒ»ãƒ‹ã‚³ãƒ¡ åœ¨åº«ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ")

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
#  ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
with st.spinner("ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿ä¸­..."):
    df = data.load()

if df is None or df.empty:
    st.error("ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã‚ã¾ã›ã‚“ã§ã—ãŸã€‚Secrets ã¨ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆè¨­å®šã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚")
    st.stop()

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
#  ã‚»ãƒƒã‚·ãƒ§ãƒ³åˆæœŸåŒ–ï¼ˆãƒ–ãƒ©ãƒ³ãƒ‰ãƒ•ã‚£ãƒ«ã‚¿ç­‰ï¼‰
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
settings.init(df)

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
#  ã‚¿ãƒ–å®šç¾©
#  â˜… æ–°æ©Ÿèƒ½è¿½åŠ æ™‚ã¯ã“ã“ã«1è¡Œè¿½åŠ ã™ã‚‹ã ã‘
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
tabs = st.tabs([
    "ğŸ” æ¤œç´¢ãƒ»æ›´æ–°",
    "ğŸ”„ åº—é–“ç§»å‹•",
    "ğŸ“Š ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰",
    "âš™ï¸ è¨­å®š",
    # "ğŸ“ˆ å£²ä¸Šãƒ¬ãƒãƒ¼ãƒˆ",   â† å°†æ¥è¿½åŠ ä¾‹
    # "ğŸ“¦ ä¸€æ‹¬æ›´æ–°",       â† å°†æ¥è¿½åŠ ä¾‹
])

with tabs[0]:
    search.render(df)

with tabs[1]:
    transfer.render(df)

with tabs[2]:
    dashboard.render(df)

with tabs[3]:
    settings.render(df)

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
#  ãƒ•ãƒƒã‚¿ãƒ¼
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
st.divider()
col_f1, col_f2 = st.columns([3, 1])
col_f1.caption("ãƒãƒˆã‚¤ãƒ»ãƒ‹ã‚³ãƒ¡ åœ¨åº«ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ  v2.1 | Powered by Streamlit + Google Sheets")
if col_f2.button("ğŸ”„ ãƒ‡ãƒ¼ã‚¿ã‚’å†èª­ã¿è¾¼ã¿"):
    st.cache_data.clear()
    st.rerun()
